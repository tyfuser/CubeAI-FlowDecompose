# 🔧 快速修复：二维码无法在手机上访问

## 问题

扫描二维码后，手机显示"访问被拒绝"或"CONNECTION_REFUSED"。

## 原因

你正在使用 `localhost` 或 `127.0.0.1` 访问前端，生成的二维码也包含 `localhost`。手机无法访问 `localhost`（因为手机的 `localhost` 指向手机自己，而不是你的电脑）。

## 快速解决方案

### 步骤 1: 获取电脑 IP 地址

在终端运行：

```bash
# macOS/Linux
ifconfig | grep "inet " | grep -v 127.0.0.1

# 或者简单方式（macOS）
ipconfig getifaddr en0
```

你会看到类似这样的输出：
```
192.168.1.100
```

### 步骤 2: 使用 IP 地址访问前端

**关闭当前浏览器标签页**，然后在新标签页中使用 IP 地址访问：

```
http://192.168.1.100:3000
```

（将 `192.168.1.100` 替换为你的实际 IP 地址）

### 步骤 3: 重新生成二维码

1. 进入 Shooting Assistant 页面
2. 查看生成的二维码和连接地址
3. 确认 URL 中包含 IP 地址（而不是 localhost）
4. 扫描二维码，手机应该能正常访问了

## 验证

生成的 URL 应该类似：
- ✅ `http://192.168.1.100:3000/#/shooting-mobile/1CF8E323`
- ❌ `http://localhost:3000/#/shooting-mobile/1CF8E323`

## 常见 IP 地址格式

- `192.168.x.x` - 最常见的家庭 Wi-Fi 网络
- `10.x.x.x` - 企业网络或某些路由器
- `172.16.x.x` 到 `172.31.x.x` - 企业网络

## 如果仍然无法访问

1. **确保手机和电脑在同一 Wi-Fi**
   - 手机和电脑必须连接到同一个 Wi-Fi 网络
   - 不能一个用 Wi-Fi，一个用有线网络（除非路由器允许）

2. **检查防火墙**
   - macOS: 系统偏好设置 → 安全性与隐私 → 防火墙
   - 确保允许传入连接

3. **使用手机热点（备选方案）**
   - 打开手机热点
   - 电脑连接到手机热点
   - 再次获取电脑 IP（热点网络中的 IP）
   - 使用新 IP 访问前端

## 界面提示

现在当你使用 localhost 访问时，界面会自动显示红色警告提示，告诉你需要使用 IP 地址访问。按照提示操作即可。

---

**记住**：每次使用 localhost 访问前端时，二维码都无法在手机上使用。始终使用 IP 地址访问前端！

